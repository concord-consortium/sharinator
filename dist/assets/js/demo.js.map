{"version":3,"sources":["webpack:///./src/demo.tsx","webpack:///./src/components/demo.tsx?4894","webpack:///./src/components/iframe.tsx?b0d9"],"names":[],"mappings":"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","file":"demo.js","sourcesContent":["import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { Demo } from \"./components/demo\"\n\nReactDOM.render(\n    <Demo />,\n    document.getElementById(\"app\")\n);\n\n\n// WEBPACK FOOTER //\n// ./src/demo.tsx","import * as React from \"react\";\nimport { IFrameOverlay } from \"./iframe-overlay\"\nimport { parseURLIntoAuthoredState, AuthoredState } from \"./iframe\"\nimport { ClassInfoResultResponse, Student, Teacher } from \"./class-info\"\nconst queryString = require(\"query-string\")\nconst superagent = require(\"superagent\")\n\nconst UID_LENGTH = 40\n\ndeclare var firebase: any  // @types/firebase is not Firebase 3\n\nexport interface DemoProps {\n}\n\nexport interface DemoState {\n  error: string|null\n  codapURL: string\n  numTeachers: number\n  numStudents: number\n  demoUID: string|null\n  demo?: FirebaseDemo\n}\n\nexport interface DemoUser {\n  name: string\n  type: \"student\"|\"teacher\"\n  email: string\n  index: number\n  interactiveState: any\n}\n\nexport interface DemoUserMap {\n  [key: string]: DemoUser\n}\n\nexport interface FirebaseDemo {\n  authoredState: AuthoredState,\n  users: DemoUserMap,\n  classInfo: ClassInfoResultResponse\n}\n\nexport function getParam(name:string):string {\n  let value = \"\"\n  const params = (window.location.search.substr(1) || \"\").split(\"&\")\n  params.forEach((param) => {\n    const [key, keyValue, ...rest] = param.split(\"=\")\n    if (key === name) {\n      value = keyValue\n    }\n  })\n  return value\n}\n\nexport function generateUID():string {\n  let i = 0\n  const uid:string[] = []\n  for (i = 0; i < UID_LENGTH; i++) {\n    uid.push(String.fromCharCode(65 + (Math.random() * 26)))\n  }\n  return uid.join(\"\")\n}\n\nexport function getUID(name:string):string|null {\n  const demoParam = getParam(name)\n  return demoParam.length === UID_LENGTH ? demoParam : null\n}\n\nexport class Demo extends React.Component<DemoProps, DemoState> {\n\n  refs: {\n    codapURL: HTMLInputElement\n    numTeachers: HTMLInputElement\n    numStudents: HTMLInputElement\n  }\n\n  constructor(props: DemoProps) {\n    super(props)\n    const demoUID = getUID(\"demo\")\n    this.state = {\n      error: null,\n      codapURL: \"\",\n      numTeachers: 1,\n      numStudents: 10,\n      demoUID: demoUID,\n    }\n\n    if (demoUID) {\n      const demo = firebase.database().ref(`demos/${demoUID}`)\n      demo.once(\"value\", (snapshot:any) => {\n        const firebaseData:FirebaseDemo = snapshot.val()\n        this.setState({demo: firebaseData})\n      })\n    }\n  }\n\n  numberChanged(e: React.ChangeEvent<HTMLInputElement>, input:HTMLInputElement) {\n    const intValue = e.currentTarget.value === \"\" ? 0 : parseInt(e.currentTarget.value, 10)\n    if (!isNaN(intValue)) {\n      if (input === this.refs.numTeachers) {\n        this.setState({numTeachers: intValue})\n      }\n      else {\n        this.setState({numStudents: intValue})\n      }\n    }\n  }\n\n  formSubmitted(e:React.FormEvent<HTMLFormElement>) {\n    e.preventDefault()\n    const codapURL = this.refs.codapURL.value\n    try {\n      const authoredState = parseURLIntoAuthoredState(codapURL)\n      const demoUID = generateUID()\n      const users:DemoUserMap = {}\n      const teachers:Teacher[] = []\n      const students:Student[] = []\n      let i = 0\n\n      for (i = 0; i < this.state.numTeachers; i++) {\n        const userUID = generateUID()\n        users[generateUID()] = {\n          index: i,\n          type: \"teacher\",\n          name: `Teacher ${i+1}`,\n          email: `teacher${i+1}@example.com`,\n          interactiveState: null\n        }\n        teachers.push({\n          first_name: \"Teacher\",\n          last_name: `${i+1}`\n        })\n      }\n\n      for (i = 0; i < this.state.numStudents; i++) {\n        users[generateUID()] = {\n          index: i,\n          type: \"student\",\n          name: `Student ${i+1}`,\n          email: `student${i+1}@example.com`,\n          interactiveState: null\n        }\n        students.push({\n          first_name: \"Student\",\n          last_name: `${i+1}`,\n          email: `student${i+1}@example.com`\n        })\n      }\n\n      const classInfo:ClassInfoResultResponse = {\n        name: `Demo ${demoUID}`,\n        class_hash: demoUID,\n        students: students,\n        teachers: teachers\n      }\n\n      const demo = firebase.database().ref(`demos/${demoUID}`)\n      const demoInfo:FirebaseDemo = {\n        authoredState: authoredState,\n        users: users,\n        classInfo: classInfo\n      }\n      demo.set(demoInfo, () => {\n        window.location.href = `?demo=${demoUID}`\n      })\n    }\n    catch (e) {\n      this.setState({error: e.message})\n    }\n  }\n\n  renderLinks() {\n    if (!this.state.demo) {\n      return <div>Loading...</div>\n    }\n\n    const users = this.state.demo.users\n    const teacherLinks:JSX.Element[] = []\n    const studentLinks:JSX.Element[] = []\n    let i = 0;\n\n    Object.keys(users).forEach((userUID) => {\n      const user = users[userUID]\n      const link = <li key={userUID}><a href={`../iframe/?demo=${this.state.demoUID}&demoUser=${userUID}`} target=\"_blank\">{user.name}</a></li>\n      if (user.type === \"teacher\") {\n        teacherLinks[user.index] = link\n      }\n      else {\n        studentLinks[user.index] = link\n      }\n    })\n\n    return (\n      <div>\n        <h1>Demo Links</h1>\n        <h2>Teachers</h2>\n        <ul>{teacherLinks}</ul>\n        <h2>Students</h2>\n        <ul>{studentLinks}</ul>\n      </div>\n    )\n  }\n\n  renderForm() {\n    return (\n      <form onSubmit={this.formSubmitted.bind(this)}>\n        <h1>Demo Creator</h1>\n        {this.state.error ? <div className=\"error\">{this.state.error}</div> : null}\n        <label htmlFor=\"codapURL\">CODAP Lara Sharing URL</label>\n        <input type=\"text\" ref=\"codapURL\" placeholder=\"url here...\" defaultValue={this.state.codapURL} />\n        <label htmlFor=\"numTeachers\">Number of Teachers</label>\n        <input type=\"text\" ref=\"numTeachers\" value={this.state.numTeachers > 0 ? this.state.numTeachers : \"\"} onChange={(e) => this.numberChanged(e, this.refs.numTeachers)} />\n        <label htmlFor=\"numStudents\">Number of Students</label>\n        <input type=\"text\" ref=\"numStudents\" value={this.state.numStudents > 0 ? this.state.numStudents : \"\"} onChange={(e) => this.numberChanged(e, this.refs.numStudents)} />\n        <div>\n          <input type=\"submit\" value=\"Create Demo\" />\n        </div>\n      </form>\n    )\n  }\n\n  render() {\n    if (this.state.demoUID) {\n      return this.renderLinks()\n    }\n    return this.renderForm()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/demo.tsx","import * as React from \"react\";\nimport { IFrameOverlay } from \"./iframe-overlay\"\nimport { getParam, getUID, FirebaseDemo } from \"./demo\"\n\nconst queryString = require(\"query-string\")\nconst superagent = require(\"superagent\")\n\ndeclare var iframePhone: any\ndeclare var firebase: any  // @types/firebase is not Firebase 3\n\nexport interface IFrameProps {\n}\n\nexport interface IFrameState {\n  src: string|null\n  irsUrl: string|null\n  copyUrl: string|null\n  authoring: boolean,\n  authoredState: AuthoredState|null,\n  authoringError: string|null\n  initInteractiveData: InitInteractiveData|null\n  demoUID: string|null\n  demoUser?: string\n}\n\nexport interface AuthoredState {\n  laraSharedUrl: string\n  docStoreUrl: string\n  autoLaunchUrl: string\n  codapUrl: string\n}\n\nexport interface InteractiveRunStateData {\n  docStoreUrl: string\n  copyUrl: string\n}\n\nexport interface InitInteractiveData {\n  version: number\n  error: string|null\n  mode: \"authoring\"|\"runtime\"\n  authoredState: AuthoredState\n  interactiveState: any|null\n  globalInteractiveState: any|null\n  hasLinkedInteractive: boolean\n  linkedState: any|null\n  interactiveStateUrl: string\n  collaboratorUrls: string|null\n  publicClassHash: string|null\n  classInfoUrl: string|null\n  interactive: InitInteractiveInteractiveData\n  authInfo: InitInteractiveAuthInfoData\n}\n\nexport interface InitInteractiveInteractiveData {\n  id: number\n  name: string\n}\nexport interface InitInteractiveAuthInfoData {\n  provider: string\n  loggedIn: boolean\n  email: string\n}\n\nexport class IFrame extends React.Component<IFrameProps, IFrameState> {\n  private classroomRef:any\n  private clientPhone:any\n  private serverPhone:any\n  private iframeCanAutosave = false\n\n  refs: {\n    [string: string]: any;\n    iframe: HTMLIFrameElement;\n    laraSharedUrl: HTMLInputElement;\n  }\n\n  constructor(props: IFrameProps) {\n    super(props)\n\n    this.submitAuthoringInfo = this.submitAuthoringInfo.bind(this)\n    this.getInteractiveState = this.getInteractiveState.bind(this)\n    this.setupNormalMode = this.setupNormalMode.bind(this)\n\n    const demoUID = getUID(\"demo\")\n    const demoUser = getParam(\"demoUser\")\n\n    this.state = {\n      irsUrl: null,\n      src: null,\n      authoring: false,\n      authoredState: null,\n      authoringError: null,\n      initInteractiveData: null,\n      copyUrl: null,\n      demoUID: demoUID,\n      demoUser: demoUser\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.demoUID) {\n      this.setupDemoMode()\n    }\n    else {\n      // TODO: figure out why iframe phone needs the delay\n      setTimeout(this.setupNormalMode, 1000)\n    }\n  }\n\n  setupDemoMode() {\n    const demoRef = firebase.database().ref(`demos/${this.state.demoUID}`)\n    demoRef.once(\"value\", (snapshot:any) => {\n      const demo:FirebaseDemo = snapshot.val()\n      const authoredState:AuthoredState = demo.authoredState\n      const email = this.state.demoUser ? demo.users[this.state.demoUser].email : \"no-email@example.com\"\n      const src = `${authoredState.autoLaunchUrl}?${queryString.stringify({server: authoredState.codapUrl})}`\n      const demoParams = `demo=${this.state.demoUID}&demoUser=${this.state.demoUser}`\n      const demoAPIUrl = (endPoint:string) => {\n        return `https://us-central1-classroom-sharing.cloudfunctions.net/${endPoint}?${demoParams}`\n      }\n      this.setState({\n        src: src,\n        irsUrl: demoAPIUrl(\"demoInteractiveRunState\"),\n        initInteractiveData: {\n          version: 1,\n          error: null,\n          mode: \"runtime\",\n          authoredState: authoredState,\n          interactiveState: null,\n          globalInteractiveState: null,\n          hasLinkedInteractive: false,\n          linkedState: null,\n          interactiveStateUrl: demoAPIUrl(\"demoInteractiveRunState\"),\n          collaboratorUrls: null,\n          publicClassHash: this.state.demoUID,\n          classInfoUrl: demoAPIUrl(\"demoClassInfo\"),\n          interactive: {id: 1, name: \"demo\"},\n          authInfo: {provider: \"demo\", loggedIn: true, email: email}\n        },\n        authoredState: authoredState\n      })\n      setTimeout(this.getInteractiveState, 10);\n    })\n  }\n\n  setupNormalMode() {\n    this.clientPhone = iframePhone.getIFrameEndpoint()\n    this.clientPhone.addListener('initInteractive', (data:InitInteractiveData) => {\n      if (data.mode === \"authoring\") {\n        this.setState({\n          authoring: true,\n          authoredState: data.authoredState\n        })\n        return\n      }\n\n      const authoredState:AuthoredState = data.authoredState\n      const src = `${authoredState.autoLaunchUrl}?${queryString.stringify({server: authoredState.codapUrl})}`\n\n      this.setState({\n        src: src,\n        irsUrl: data.interactiveStateUrl,\n        initInteractiveData: data,\n        authoredState: data.authoredState\n      })\n\n      if (data.interactiveStateUrl)  {\n        setTimeout(this.getInteractiveState, 1000)\n      }\n    })\n    this.clientPhone.addListener('getInteractiveState', () => {\n      if (this.iframeCanAutosave) {\n        this.postMessageToInnerIframe('cfm::autosave');\n      }\n      else {\n        this.clientPhone.post('interactiveState', 'nochange');\n      }\n    });\n    this.clientPhone.initialize();\n    this.clientPhone.post('supportedFeatures', {\n      apiVersion: 1,\n      features: {\n        authoredState: true,\n        interactiveState: true\n      }\n    })\n  }\n\n  postMessageToInnerIframe(type:string) {\n    if (this.refs.iframe) {\n      this.refs.iframe.contentWindow.postMessage({type: type}, '*')\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.state.authoring) {\n      this.refs.laraSharedUrl.focus()\n    }\n    else if (this.refs.iframe && !this.serverPhone) {\n      // proxy the result of the initInteractive message from LARA to the docstore\n      this.serverPhone = new iframePhone.ParentEndpoint(this.refs.iframe, () => {\n        this.serverPhone.post(\"initInteractive\", this.state.initInteractiveData)\n      })\n\n      // setup a generic postmessage CFM listener for the iframed CODAP window that autolaunch loads\n      // we can't use the serverPhone here because it is an iframe embedded in an iframe\n      let keepPollingForCommands = true\n      window.onmessage = (e) => {\n        switch (e.data.type) {\n          case \"cfm::commands\":\n            this.iframeCanAutosave = e.data.commands && e.data.commands.indexOf('cfm::autosave') !== -1\n            keepPollingForCommands = false\n            break\n          case \"cfm::autosaved\":\n            if (this.clientPhone) {\n              this.clientPhone.post('interactiveState', 'nochange')\n            }\n            break\n        }\n      }\n\n      // keep asking for the cfm commands available until we get a response once the inner iframe loads\n      const pollForCommandList = () => {\n        if (keepPollingForCommands) {\n          this.postMessageToInnerIframe('cfm::getCommands')\n          setTimeout(pollForCommandList, 100)\n        }\n      }\n      pollForCommandList()\n    }\n  }\n\n  getInteractiveState() {\n    const iframe = this\n    superagent\n      .get(this.state.irsUrl)\n      .withCredentials()\n      .set('Accept', 'application/json')\n      .end((err:any, res:any) => {\n        if (!err) {\n          try {\n            const json = JSON.parse(res.text)\n            if (json && json.raw_data) {\n              const rawData = JSON.parse(json.raw_data)\n              if (rawData && rawData.docStore && rawData.docStore.accessKeys && rawData.docStore.accessKeys.readOnly && this.state.authoredState) {\n                iframe.setState({\n                  copyUrl: `${this.state.authoredState.docStoreUrl}/v2/documents?source=${rawData.docStore.recordid}&accessKey=RO::${rawData.docStore.accessKeys.readOnly}`,\n                })\n              }\n              return\n            }\n          }\n          catch (e) {}\n          setTimeout(this.getInteractiveState, 1000)\n        }\n      });\n  }\n\n  submitAuthoringInfo(e:React.FormEvent<HTMLFormElement>) {\n    e.preventDefault()\n    try {\n      const authoredState = parseURLIntoAuthoredState(this.refs.laraSharedUrl.value)\n      this.setState({authoringError: null})\n      this.clientPhone.post('authoredState', authoredState)\n    }\n    catch (e) {\n      this.setState({authoringError: e.message})\n    }\n  }\n\n  renderAuthoring():JSX.Element {\n    const inputStyle = {width: \"100%\"}\n    const errorStyle = {color: \"#f00\", marginTop: 10, marginBottom: 10}\n    const url = (this.state.authoredState ? this.state.authoredState.laraSharedUrl : \"\") || \"\"\n    return <form onSubmit={this.submitAuthoringInfo}>\n             {this.state.authoringError ? <div style={errorStyle}>{this.state.authoringError}</div> : null}\n             <label htmlFor=\"laraSharedUrl\">Shared URL from LARA tab in CODAP</label>\n             <input type=\"text\" id=\"laraSharedUrl\" ref=\"laraSharedUrl\" style={inputStyle} defaultValue={url} />\n             <input type=\"submit\" value=\"Save\" />\n           </form>\n  }\n\n  renderIFrame():JSX.Element|null {\n    if (this.state.src) {\n      return <div id=\"iframe\">\n              <iframe ref=\"iframe\" src={this.state.src}></iframe>\n              <IFrameOverlay initInteractiveData={this.state.initInteractiveData} copyUrl={this.state.copyUrl} authoredState={this.state.authoredState} />\n            </div>\n    }\n    return null\n  }\n\n  render() {\n    if (this.state.authoring) {\n      return this.renderAuthoring()\n    }\n    return this.renderIFrame()\n  }\n}\n\nexport function parseURLIntoAuthoredState(url:string) {\n  let [docStoreUrl, query, ...rest] = url.split(\"?\")\n  const urlMatches = docStoreUrl.match(/^((https?:\\/\\/[^/]+\\/)v2\\/documents\\/\\d+\\/(auto)?launch)/)\n  const launchParams = queryString.parse(query || \"\")\n  const matchProtocol = (url:string):string => {\n    const a = document.createElement(\"a\")\n    a.href = url\n    a.protocol = location.protocol\n    return a.href\n  }\n\n  if (!urlMatches || !launchParams.server) {\n    throw new Error(\"This URL does not appear to be a shared URL from the LARA tab in CODAP\")\n  }\n\n  docStoreUrl = matchProtocol(urlMatches[2].replace(/\\/+$/, \"\")) // remove trailing slashes\n\n  let codapUrl\n  [codapUrl, query, ...rest] = launchParams.server.split(\"?\")\n  const codapParams = queryString.parse(query || \"\")\n  codapParams.componentMode = \"yes\"\n  codapParams.documentServer = docStoreUrl\n  codapParams.saveSecondaryFileViaPostMessage = \"yes\"\n  codapUrl = matchProtocol(`${codapUrl}?${queryString.stringify(codapParams)}`)\n\n  const authoredState:AuthoredState = {\n    laraSharedUrl: url,\n    docStoreUrl: codapParams.documentServer,\n    autoLaunchUrl: matchProtocol(urlMatches[1].replace(\"/launch\", \"/autolaunch\")), // change to autolaunch\n    codapUrl: codapUrl\n  }\n\n  return authoredState\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/iframe.tsx"],"sourceRoot":""}